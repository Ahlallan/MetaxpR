library(RODBC)
SERVER = 'VIDEO-SERVER';ID='moldev'; PWD='moldev';PlateID=214; WellID='A01';SiteID=c(6,6);TimePoint=1;Unix.diff=c('//','/media/')
WellY = which(substr(WellID,1,1)==LETTERS)
WellX = as.numeric(substr(WellID,2,3))
ch = odbcConnect(SERVER, uid = ID, pwd = PWD)
WTAB = sqlQuery(ch,paste0("SELECT * FROM SITE WHERE PLATE_ID=",PlateID," AND WELL_X=",WellX,"AND WELL_Y=",WellY))
WTAB = WTAB[which(WTAB$X_POSITION==SiteID[1] & WTAB$Y_POSITION==SiteID[2]),]
if(nrow(WTAB)==0){
PATH=NULL
}else{
ID = sqlQuery(ch,paste0("SELECT IMAGE_ID FROM PLATE_IMAGES WHERE SITE_ID=",WTAB$SITE_ID,"AND T_INDEX=",TimePoint))
IMINFO = sqlQuery(ch,paste0("SELECT OBJ_SERVER_NAME,LOCATION_ID FROM PLATE_IMAGE_DATA WHERE OBJ_ID IN (",paste0(ID[,"IMAGE_ID"],collapse=','),")"))
ROOT = sqlQuery(ch,paste0("SELECT SERVER_NAME,DIRECTORY FROM FILE_LOCATION WHERE LOCATION_ID=",IMINFO$LOCATION_ID[1]))
PATH = paste0(ROOT$SERVER_NAME,ROOT$DIRECTORY,'\\',IMINFO$OBJ_SERVER_NAME)
if(.Platform$OS.type=='unix'){
PATH=gsub(Unix.diff[1],Unix.diff[2],gsub('[\\]','/',PATH))
}
}
PATH
file.exists(PATH)
library(EBImage)
test=readImage(PATH)
display(normalize(test))
setwd('/mnt/DATA_01/myGit/MetaxpR')
library(devtools)
install.packages(roxygen2)
install.packages('roxygen2')
install.packages('roxygen2')
library(roxygen2)
document()
build()
install.packages("/mnt/DATA_01/myGit/MetaxpR_0.4.3.tar.gz", repos = NULL, type = "source")
